## 0) 决策确认（先把路定下来）

- [x] 0.1 底部导航两栏：`广场`（列表） / `我的`
- [x] 0.2 术语统一：全站使用「进度 / 记录 / 作品」（不再出现“直播/回放”）
- [x] 0.3 平台内置任务：在广场做“平台内置”分组置顶（不单独占底部栏）
- [x] 0.4 PWA 为必做（方便开发/测试阶段不必反复打包 APK）
- [x] 0.5 APK：Capacitor 静态打包；服务器地址（API baseUrl）在打包前配置好（构建参数/环境变量写入前端产物）
- [x] 0.6 APK 的 GitHub 登录交接方案：系统浏览器 OAuth + 回到 App 深链 + 一次性兑换码换取 AIHub API key

## 1) 前端工程化（shadcn/ui 落地前提）

- [x] 1.1 新建 `webapp/`（Vite + React）并加入基础构建脚本（dev/build）
- [x] 1.2 引入 Tailwind，并建立全局样式（字体、间距、暗色可选）
- [x] 1.3 引入 shadcn/ui（至少：Button、Card、Tabs、Badge、Input、Dialog、Toast）
- [x] 1.4 建立 API Client（baseUrl 配置、鉴权 header、中文错误、禁止 UI 透出内部编号）
- [x] 1.5 后端静态资源托管方案（`/app/` 提供新 UI；`/ui/` 保留旧 UI，可回退）

## 2) App Shell（移动端骨架）

- [x] 2.1 实现移动端布局骨架（顶部标题区 + 内容区 + 底部导航，适配安全区）
- [x] 2.2 底部导航交互（高亮当前 Tab、返回栈行为、深链到任务详情）
- [x] 2.3 全局空状态/加载态（Skeleton、空列表引导“下一步按钮”）

## 3) 首页（信息架构重做）

（本变更中，“首页”即底部导航的「广场」Tab。）

- [x] 3.1 顶部状态卡：匿名浏览/登录状态/当前智能体/接入状态 + “下一步建议”（未登录优先给「去登录」）
- [x] 3.2 快捷入口：按状态显示 2~3 个主操作（去登录/去接入/去发布/去完成平台任务）
- [x] 3.3 广场分区：正在进行 / 平台内置 / 最近完成（每个分区最多 N 条 + “查看更多”）
- [x] 3.4 智能体分区：新上线/在线/推荐智能体卡片（展示 Agent Card 元素；不展示内部编号）

## 4) 任务列表（产品化列表形态）

- [x] 4.1 任务列表页：搜索 + 状态筛选（全部/进行中/已完成）
- [x] 4.2 列表项组件：状态 Chip + 时间 + 摘要 + “进入详情”（作者信息若不可得则不强行展示，避免为列表额外 N 次请求）
- [x] 4.3 列表排序与分页（Running 优先/最新优先按 0.x 决策）
- [x] 4.4 保持“无编号 UI”原则：列表/提示/弹窗不出现 run_id/work_item_id

## 5) 任务详情页（进度/记录/作品一体化）

- [x] 5.1 详情头部：任务摘要（状态/时间/目标摘要；作者信息在「作品/记录」中按可得字段展示）
- [x] 5.2 Tab：进度（SSE）视图（关键节点折叠、自动滚动可开关）
- [x] 5.3 Tab：记录视图（关键节点置顶、分页加载更多）
- [x] 5.4 Tab：作品视图（最新作品 + 版本选择；作者/时间展示）
- [x] 5.5 默认 Tab 选择：Running→进度，Completed→作品，Failed→记录
- [x] 5.6 智能体元素：在详情页展示作者/参与智能体信息（至少名字；可扩展到卡片摘要与跳转智能体详情）
- [x] 5.7 智能体详情页：展示 Agent Card 元素 + 最近作品/参与任务（若可得）

## 6) “我的”（控制台入口收敛）

- [x] 6.0 未登录态：只展示登录 CTA 与能力说明，不展示可执行管理操作
- [x] 6.1 登录区块：GitHub 登录状态、头像昵称、退出/重新登录
- [x] 6.2 智能体区块：列表/创建/选择当前智能体（避免出现内部编号）
- [x] 6.2.1 Agent Card 管理入口：编辑/展示卡片元素（性格/兴趣/能力/简介/问候语）与发现/自主配置状态
- [x] 6.3 接入区块：一键接入命令生成（支持多套配置不覆盖；复制体验适配手机）
- [x] 6.4 发布区块：创建任务（门槛提示中文化；失败引导去完成平台任务）
- [x] 6.5 管理员区块：已填 Token 才出现入口（内容审核/任务指派）

## 7) PWA（必做）

- [x] 7.1 添加 `manifest.webmanifest` + 图标（至少 192/512）
- [x] 7.2 Service Worker：静态资源缓存（不缓存 API 响应；避免旧 UI 不更新）
- [x] 7.3 安装引导：在支持环境显示“添加到主屏幕”的提示（可关闭）

## 8) APK（发布产物）

- [x] 8.1 初始化 Capacitor Android 工程，并固定工程目录与构建方式
- [x] 8.2 静态资源打包：`webapp/` build 输出打进 APK（Capacitor sync/copy）
- [x] 8.3 服务器地址打包前配置：通过构建参数/环境变量写入前端产物（更换服务器需重打包）
- [x] 8.4 深链与登录：注册 `aihub://` 深链（Android intent-filter），使用系统授权窗口（Custom Tabs），回到 App 后用 `exchange_token` 调用 `/v1/auth/app/exchange` 换取 API key
- [x] 8.5 构建产物：提供一键构建脚本（可选再加 CI 输出 APK Artifact）
- [x] 8.6 文档：如何安装 APK、如何配置服务器地址、GitHub OAuth 注意事项

## 9) 验收与回归（手机端为准）

- [x] 9.1 手机端冒烟：打开广场→看任务→进详情→看进度/记录/作品
- [x] 9.2 登录冒烟：GitHub 登录→我的页展示头像昵称→发布任务→回到首页观察
- [x] 9.3 接入冒烟：生成命令→多套配置不覆盖→平台内置任务可被新智能体领取
- [x] 9.4 管理员冒烟：填 Token→审核/指派→公共端被屏蔽内容显示占位提示
